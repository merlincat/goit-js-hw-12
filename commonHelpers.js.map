{"version":3,"file":"commonHelpers.js","sources":["../src/js/refs.js","../src/js/lightboxInstance.js","../src/js/loader.js","../src/js/onScroll.js","../src/js/renderGallery.js","../src/main.js"],"sourcesContent":["export const formEl = document.querySelector('.search-form');\nexport const galleryContainer = document.querySelector('.gallery');\nexport const loader = document.querySelector('.loader');\nexport const loadMoreBtn = document.querySelector('.js-load-more');\n","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nexport const lightbox = new SimpleLightbox('.gallery-link', {\n  nav: true,\n  captionDelay: 250,\n  captionsData: 'alt',\n  close: true,\n  enableKeyboard: true,\n  docClose: true,\n  scrollZoom: false,\n  fadeSpeed: 400,\n});\n","import { loader } from './refs';\nexport const showLoader = () => {\n  loader.style.display = 'block';\n  loader.style.visibility = 'visible';\n};\nexport const hideLoader = () => {\n  loader.style.display = 'none';\n  loader.style.visibility = 'hidden';\n};\n","export const onScroll = () => {\n  const { height: cardHeight } = document\n    .querySelector('.gallery')\n    .firstElementChild.getBoundingClientRect();\n\n  window.scrollBy({\n    top: cardHeight * 2,\n    behavior: 'smooth',\n  });\n};\n","export const renderGallery = hits => {\n  return hits.reduce(\n    (html, image) =>\n      html +\n      `<li class=\"gallery-item\">\n  <a class=\"gallery-link\" href=\"${image.largeImageURL}\">\n    <img\n      class=\"gallery-image\"\n      src=\"${image.webformatURL}\"\n      alt=\"${image.tags}\"\n    />\n  </a>\n  <div class=\"descr-container\">\n  <div class=\"image-descr\">Likes\n  <span class=\"image-descr-value\">${image.likes}</span>\n  </div>\n    <div class=\"image-descr\">Views\n  <span class=\"image-descr-value\">${image.views}</span>\n  </div>\n      <div class=\"image-descr\">Comments\n  <span class=\"image-descr-value\">${image.comments}</span>\n  </div>\n        <div class=\"image-descr\">Downloads\n  <span class=\"image-descr-value\">${image.downloads}</span>\n  </div>\n  </div>\n</li>`,\n    ''\n  );\n};\n","import axios from 'axios';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nimport { formEl, galleryContainer, loadMoreBtn } from './js/refs';\nimport { lightbox } from './js/lightboxInstance';\nimport { showLoader, hideLoader } from './js/loader';\nimport { onScroll } from './js/onScroll';\nimport { renderGallery } from './js/renderGallery';\n\nlet q = null;\nlet page = 1;\nconst per_page = 40;\n\nconst getPhotos = (q, page, per_page) => {\n  axios.defaults.baseURL = 'https://pixabay.com/api';\n\n  return axios.get('/?key=41675513-91cb25c2d4155284de80d9ebe', {\n    params: {\n      q,\n      page,\n      per_page,\n      orientation: 'horizontal',\n      safesearch: true,\n    },\n  });\n};\n\nconst searchSubmit = async event => {\n  event.preventDefault();\n  loadMoreBtn.classList.add('is-hidden');\n  galleryContainer.innerHTML = '';\n  showLoader();\n  page = 1;\n  q = event.target.elements.search.value.trim();\n  //\n  if (!q) {\n    hideLoader();\n    loadMoreBtn.classList.add('is-hidden');\n    return iziToast.warning({\n      position: 'topRight',\n      message: 'Empty query',\n    });\n  }\n  //\n  try {\n    const {\n      data: { hits, totalHits },\n    } = await getPhotos(q, page, per_page);\n\n    if (hits.length === 0) {\n      galleryContainer.innerHTML = '';\n      loadMoreBtn.classList.add('is-hidden');\n      return iziToast.error({\n        position: 'topRight',\n        message:\n          'Sorry, there are no images matching your search query. Please try again!',\n      });\n    }\n    iziToast.success({\n      position: 'topRight', // bottomRight, bottomLeft, topRight, topLeft, topCenter, bottomCenter, center\n      message: `\"Hooray! We found ${totalHits} images. It should be ${Math.ceil(\n        totalHits / per_page\n      )} pages\"`,\n    });\n\n    galleryContainer.innerHTML = renderGallery(hits);\n    lightbox.refresh();\n\n    hasMoreData(Math.ceil(totalHits / per_page), page);\n  } catch (error) {\n    console.log(error);\n  } finally {\n    hideLoader();\n  }\n};\n//\nconst hasMoreData = (lastPage, page) => {\n  if (page < lastPage) {\n    loadMoreBtn.classList.remove('is-hidden');\n  } else {\n    loadMoreBtn.classList.add('is-hidden');\n    iziToast.info({\n      position: 'topRight', // bottomRight, bottomLeft, topRight, topLeft, topCenter, bottomCenter, center\n      message: \"We're sorry, but you've reached the end of search results.\",\n    });\n  }\n};\n//\nconst loadMoreData = async () => {\n  page += 1;\n  loadMoreBtn.classList.add('is-hidden');\n  showLoader();\n\n  try {\n    const {\n      data: { hits, totalHits },\n    } = await getPhotos(q, page, per_page);\n\n    galleryContainer.insertAdjacentHTML('beforeend', renderGallery(hits));\n    lightbox.refresh();\n    // Функція для скролу\n    onScroll();\n\n    hasMoreData(Math.ceil(totalHits / per_page), page);\n  } catch (error) {\n    console.log(error);\n  } finally {\n    hideLoader();\n  }\n};\n//\nformEl.addEventListener('submit', searchSubmit);\nloadMoreBtn.addEventListener('click', loadMoreData);\n"],"names":["formEl","galleryContainer","loader","loadMoreBtn","lightbox","SimpleLightbox","showLoader","hideLoader","onScroll","cardHeight","renderGallery","hits","html","image","q","page","per_page","getPhotos","axios","searchSubmit","event","iziToast","totalHits","hasMoreData","error","lastPage","loadMoreData"],"mappings":"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"}